<!DOCTYPE html>
<html>
  <head>
    <title>Cleopatra - UI for SPS</title>
    <script src="js/parser.js"></script>
    <script src="js/tree.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/QueryData.compressed.js"></script>
    <link rel="stylesheet" type="text/css" href="css/ui.css">
    <link rel="stylesheet" type="text/css" href="css/tree.css">
  </head>
  <body>
    <div id="ui" class="hidden">
      <div id="mainarea">
        <ul id="treeHeader">
          <li id="sampleCountHeader"><span>Running time</span></li>
          <li id="selfSampleCountHeader"><span>Self</span></li>
          <li id="symbolNameHeader"><span>Symbol Name</span></li>
        </ul>
        <div id="tree" tabindex="0">
          <div id="leftColumnBackground"></div>
        </div>
        <div id="bottombar">
          <div id="histogram"></div>
          <div id="markers"></div>
        </div>
      </div>
      <div id="infobar"></div>
    </div>
    <div id="dataentry">
      <h1>Enter your profile data here:</h1>
      <textarea rows=20 cols=80 id=data autofocus spellcheck=false></textarea>
      <p><button onclick="parse()">Parse</button></p>
    </div>
    <script>
      if (location.href.indexOf("usesample") != -1) {
        var filename = (location.href.indexOf("pseudo") != -1) ? 'sample.profile' : 'sample.log';
        var oXHR = new XMLHttpRequest();
        oXHR.open('GET', filename, true);
        oXHR.responseType = "text";
        oXHR.onreadystatechange = function (oEvent) {  
          if (oXHR.readyState === 4) {  
            if (oXHR.status === 200) {  
              document.getElementById("data").value = oXHR.responseText;
              parse();
            } else {  
              alert("Using the sample log needs XHR to work, so you can't run this from a file URL but need to start a webserver.");
            }  
          }  
        };  
        oXHR.send(null);
      }
    </script>    
  </body>
</html>
